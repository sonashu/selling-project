!function(){"use strict";let n,t,e,r,o,i,c,u;!function(n){n.TRACKING_ACCEPTED="trackingConsentAccepted",n.TRACKING_DECLINED="trackingConsentDeclined",n.MARKETING_ACCEPTED="marketingConsentAccepted",n.STATISTICS_ACCEPTED="statisticsConsentAccepted",n.PREFERENCES_ACCEPTED="preferencesConsentAccepted",n.ATTRIBUTION_ACCEPTED="attributionConsentAccepted",n.MARKETING_DECLINED="marketingConsentDeclined",n.STATISTICS_DECLINED="statisticsConsentDeclined",n.PREFERENCES_DECLINED="preferencesConsentDeclined",n.ATTRIBUTION_DECLINED="attributionConsentDeclined",n.CONSENT_COLLECTED="visitorConsentCollected"}(n||(n={})),function(n){n.V2_0="2.0",n.V2_1="2.1"}(t||(t={})),function(n){n.ACCEPTED="yes",n.DECLINED="no",n.NO_INTERACTION="no_interaction",n.NO_VALUE=""}(e||(e={})),function(n){n.NO_VALUE="",n.ACCEPTED="1",n.DECLINED="0"}(r||(r={})),function(n){n.GDPR="GDPR",n.CCPA="CCPA",n.NO_VALUE=""}(o||(o={})),function(n){n.CCPA_BLOCK_ALL="CCPA_BLOCK_ALL",n.GDPR="GDPR",n.GDPR_BLOCK_ALL="GDPR_BLOCK_ALL",n.CCPA="CCPA"}(i||(i={})),function(n){n.MARKETING="m",n.STATISTICS="s",n.PREFERENCES="p",n.ATTRIBUTION="t"}(c||(c={})),function(n){n.MARKETING="marketing",n.STATISTICS="statistics",n.PREFERENCES="preferences",n.ATTRIBUTION="attribution"}(u||(u={}));const C=["lim","v","con","reg"];function s(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function a(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?s(Object(e),!0).forEach((function(t){E(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):s(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}function E(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function f(n,t){const e=t.slice().sort();return n.length===t.length&&n.slice().sort().every((n,t)=>n===e[t])}function l(){const n=document.cookie?document.cookie.split("; "):[];let e=void 0;if(n.forEach(n=>{const[t,r]=n.split("=");if("_tracking_consent"===decodeURIComponent(t)){var o=JSON.parse(decodeURIComponent(r));e=o}}),void 0!==e&&!function(n){if(![t.V2_0,t.V2_1].includes(n.v))return!0;return!f(Object.keys(n),C)}(e))return e}function T(){try{let n=l();if(!n)return;return n.v===t.V2_0?function(n){const e=a(a({},n.con),{},{GDPR:I(n)?d(n.con.GDPR):void 0});void 0===e.GDPR&&delete e.GDPR;return{con:e,reg:n.reg,v:t.V2_1,lim:n.lim}}(n):n}catch(n){return}}function A(){const n=T();if(D(n))return d(r.NO_VALUE);const t=n.con;switch(typeof t.GDPR){case"undefined":return d(r.NO_VALUE);case"string":return d(t.GDPR);default:return t.GDPR}}function P(){const n=T();if(D(n))return r.NO_VALUE;const t=n.con.CCPA;return void 0===t?r.NO_VALUE:t}function D(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===n&&(n=T()),void 0===n}function d(n){return{[c.MARKETING]:n,[c.STATISTICS]:n,[c.PREFERENCES]:n,[c.ATTRIBUTION]:n}}function I(n){const t=[i.GDPR,i.GDPR_BLOCK_ALL];return n.lim.some(n=>t.includes(n))&&o.GDPR in n.con}const N={"":[],GDPR:[i.GDPR,i.GDPR_BLOCK_ALL],CCPA:[i.CCPA_BLOCK_ALL,i.CCPA]};function g(n,t){document.dispatchEvent(new CustomEvent(n,{detail:t||{}}))}function R(t){!0===t.marketing?g(n.MARKETING_ACCEPTED):g(n.MARKETING_DECLINED),!0===t.statistics?g(n.STATISTICS_ACCEPTED):g(n.STATISTICS_DECLINED),!0===t.preferences?g(n.PREFERENCES_ACCEPTED):g(n.PREFERENCES_DECLINED),!0===t.attribution?g(n.ATTRIBUTION_ACCEPTED):g(n.ATTRIBUTION_DECLINED),g(n.CONSENT_COLLECTED,t)}function _(t,e,r){const o=new XMLHttpRequest,i=JSON.stringify(t);o.open("POST","/set_tracking_consent.json",!0),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){if(4!==o.readyState)return;const i=function(n){try{return JSON.parse(n)}catch(n){return{error:"Unknown error"}}}(o.responseText);var c;0===(c=o.status)||200>=c&&c<400?(!function(t,e){void 0!==t.consent?(!0===t.consent?g(n.TRACKING_ACCEPTED):g(n.TRACKING_DECLINED),e&&R({marketing:t.consent,preferences:t.consent,statistics:t.consent,attribution:t.consent})):void 0!==t.granular_consent&&R(t.granular_consent)}(t,r),e(null,i)):e(i)},o.send(i)}function S(n){return D()?e.NO_VALUE:n===r.NO_VALUE?e.NO_INTERACTION:function(n){switch(n){case r.ACCEPTED:return e.ACCEPTED;case r.DECLINED:return e.DECLINED;default:return e.NO_VALUE}}(n)}function L(){if(D())return e.NO_VALUE;const n=A();return n[c.MARKETING]===r.ACCEPTED&&n[c.STATISTICS]===r.ACCEPTED?e.ACCEPTED:n[c.MARKETING]===r.DECLINED||n[c.STATISTICS]===r.DECLINED?e.DECLINED:e.NO_INTERACTION}function p(){const n=function(){const n=T();return D(n)?o.NO_VALUE:n.reg}();return n in o?n:o.NO_VALUE}function O(){return function(){const n=T();return D(n)?{limit:[]}:{limit:n.lim}}()}function h(n){return v(i.GDPR_BLOCK_ALL)&&n?y()?document.referrer:"":null}function m(n){return v(i.GDPR_BLOCK_ALL)&&n?y()?window.location.pathname+window.location.search:"/":null}function b(){return"string"==typeof navigator.globalPrivacyControl?"1"===navigator.globalPrivacyControl:Boolean(navigator.globalPrivacyControl)}function y(){if(""===document.referrer)return!0;const n=document.createElement("a");return n.href=document.referrer,window.location.hostname!=n.hostname}function w(){return v(i.GDPR)||v(i.GDPR_BLOCK_ALL)}function G(){const n=p();if(n===o.NO_VALUE)return!1;const t=O();return 0!==t.limit.length&&t.limit.some(t=>function(n,t){return N[n].includes(t)}(n,t))}function B(){return!!D()||function(){if(!w())return!0;const n=A();return n[c.MARKETING]===r.ACCEPTED&&n[c.STATISTICS]===r.ACCEPTED||n[c.MARKETING]!==r.DECLINED&&n[c.STATISTICS]!==r.DECLINED&&p()!==o.GDPR}()}function v(n){return O().limit.includes(n)}function k(){return b()&&p()===o.CCPA?e.DECLINED:S(P())}function K(n){if(!w())return!0;const t=A();return t[n]===r.ACCEPTED||t[n]!==r.DECLINED&&p()!==o.GDPR}function U(){return function(){const n=l();switch(null==n?void 0:n.v){case"2.0":return t.V2_0;case"2.1":return t.V2_1;default:return}}()===t.V2_1}const V={getTrackingConsent:L,setTrackingConsent:function(n,t){if(D()){const n="Shop is not configured to block privacy regulation in online store settings.";return console.warn(n),t({error:n})}if(function(n){if(U()){if("boolean"!=typeof n&&"object"!=typeof n)throw TypeError("setTrackingConsent must be called with a boolean or object consent value");if("object"==typeof n){const t=Object.values(u);if(!f(t,Object.keys(n)))throw TypeError("The submitted consent object should have exactly these keys: ".concat(t.join(", "),"."))}}else if("boolean"!=typeof n)throw TypeError("setTrackingConsent must be called with a boolean consent value")}(n),"function"!=typeof t)throw TypeError("setTrackingConsent must be called with a callback function");if("object"==typeof n){const e=h(n.statistics),r=m(n.statistics);return _(a(a({granular_consent:n},null!==e&&{referrer:e}),null!==r&&{landing_page:r}),t,U())}{const e=h(n),r=m(n);return _(a(a({consent:n},null!==e&&{referrer:e}),null!==r&&{landing_page:r}),t,U())}},userCanBeTracked:B,getRegulation:p,isRegulationEnforced:G,getShopPrefs:O,shouldShowGDPRBanner:function(){return p()===o.GDPR&&G()&&L()===e.NO_INTERACTION},userDataCanBeSold:function(){return!b()&&(!!D()||!1!==B()&&function(){if(v(i.CCPA_BLOCK_ALL)){return p()!==o.CCPA}if(v(i.CCPA)){return P()!==r.DECLINED}return!0}())},setCCPAConsent:function(n,t){if("boolean"!=typeof n)throw TypeError("setCCPAConsent must be called with a boolean consent value");if("function"!=typeof t)throw TypeError("setCCPAConsent must be called with a callback function");return _({ccpa_consent:n},t,U())},getCCPAConsent:k,shouldShowCCPABanner:function(){return p()===o.CCPA&&O().limit.includes(i.CCPA)&&k()===e.NO_INTERACTION},siteStatisticsCanBeCollected:function(){return K(c.STATISTICS)},preferencesCanBeStored:function(){return K(c.PREFERENCES)},marketingCanBeAttributed:function(){return K(c.ATTRIBUTION)},marketingProfileCanBeCreated:function(){return K(c.MARKETING)},getCCPAConsentValue:P,merchantEnforcingRegulationLimit:v,isGPCSignalPresent:b,exposeBetaFunctionality:U};function j(){return V.getTrackingConsent()}function M(n,t){V.setTrackingConsent(n,t)}function F(){return V.userCanBeTracked()}function x(){return V.getRegulation()}function J(){return V.isRegulationEnforced()}function q(){return V.getShopPrefs()}function H(){return V.shouldShowGDPRBanner()}function X(){return V.userDataCanBeSold()}function z(n,t){return V.setCCPAConsent(n,t)}function Q(){return V.getCCPAConsent()}function W(){return V.shouldShowCCPABanner()}function Y(){return V.siteStatisticsCanBeCollected()}function Z(){return V.preferencesCanBeStored()}function $(){return V.marketingCanBeAttributed()}function nn(){return V.marketingProfileCanBeCreated()}function tn(){V.getRegulation()===o.CCPA&&V.getCCPAConsentValue()!=r.DECLINED&&V.merchantEnforcingRegulationLimit(i.CCPA)&&V.isGPCSignalPresent()&&z(!1,()=>!1);const n={getTrackingConsent:j,setTrackingConsent:M,userCanBeTracked:F,getRegulation:x,isRegulationEnforced:J,getShopPrefs:q,shouldShowGDPRBanner:H,userDataCanBeSold:X,setCCPAConsent:z,getCCPAConsent:Q,shouldShowCCPABanner:W};if(V.exposeBetaFunctionality()){const t={siteStatisticsCanBeCollected:Y,preferencesCanBeStored:Z,marketingCanBeAttributed:$,marketingProfileCanBeCreated:nn};n.unstable=t}return n}window.Shopify=window.Shopify?window.Shopify:{},window.Shopify.customerPrivacy=window.Shopify.trackingConsent=tn()}();
